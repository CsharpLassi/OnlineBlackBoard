{% extends 'blackboard/layout.html' %}

{% block row %}
    <div class="row justify-content-center">
        <div class="col">
            <h1>Status: <span id="status">Not Connected</span></h1>
        </div>
    </div>
    <div class="row justify-content-center">
        <div id="content" class="col" style="max-width: 100%">
        </div>
    </div>
{% endblock %}

{% block js %}
    <script src="{{ url_for('static', filename='components/marked/marked.min.js') }}"></script>

    <script>
        $(document).ready(function () {
            var socket = io.connect('/blackboard');
            socket.on('connect', function () {
                $('#status').text('Connected');
                socket.emit('get_room');
            });
            socket.on('change_room', function (msg) {
                $('#status').text(msg.room_id);
            });
            socket.on('print_content', function (msg) {
                $('#content').html(marked(msg.markdown));
                $("#content").scrollTop($("#content")[0].scrollHeight);

            });
        });
    </script>
{% endblock %}